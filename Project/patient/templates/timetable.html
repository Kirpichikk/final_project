<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выпадающий список в выпадающем списке</title>
</head>
<body>

    <h1>Выберите категорию и подкатегорию</h1>
    <form action="/patient_office/doctor_date" method="POST">
        <label for="category">Выберите категорию:</label>
        <select id="category" name="category" onchange="this.form.submit()">
            <option value="">--Выберите--</option>
            {% for cat in categories %}
                <option value="{{ cat }}" {% if category == cat %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>

        <label for="subcategory">Выберите подкатегорию:</label>
        <select id="subcategory" name="subcategory">
            <option value="">--Сначала выберите категорию--</option>
            {% if category %}
                {% for sub in subcategories[category] %}
                    <option value="{{ sub }}" {% if subcategory == sub %}selected{% endif %}>{{ sub }}</option>
                {% endfor %}
            {% endif %}
        </select>

        <button type="submit">Отправить</button>
    </form>

    {% if subcategory %}
        <h2>Вы выбрали: {{ category }} - {{ subcategory }}</h2>
    {% endif %}

</body>
</html>